# Spring

spring 은 WebRTC에서 영상 음성 전송하지 않고 오지 시그널링만 담당한다.

이는 브라우저 ↔ 브라우저 끼리 영상을 전송하고 스프링 서버는 그 둘이 연결될 수 있또록 필요한 초기 정보만 교환해주는 역할을 한다.

# **🔥 1. WebRTC 연결을 위해 “반드시” 필요한 것들**

WebRTC는 바로 P2P 연결을 할 수 있는 구조가 아니다.

서로 연결하기 위해 아래 3가지 정보를 교환해야 한다.

### **① Offer SDP**

- 내가 어떤 코덱을 지원하는지
- 어떤 방식으로 연결 가능한지
- WebRTC 연결 구성 정보

### **② Answer SDP**

- 상대방의 Offer에 대한 응답 정보

### **③ ICE Candidate**

- 내 컴퓨터의 실제 네트워크 경로(IP, 포트 정보)
- NAT / 방화벽 뒤에서도 길 찾기 위한 후보들

---

↳ 문제:

브라우저끼리는 **초기 단계에는 서로의 위치(IP)** 를 모른다.

서로 offer/answer/ICE 를 주고 받을 **통로**가 필요하다.

---

# **🔔 2. Spring의 실제 역할 = 이 초기 정보들을 “중계”하는 것**

Spring은 WebRTC가 직접 하지 못하는 “초기 정보 교환” 책임을 대신한다.

---

## **✔ Spring이 하는 일 (Signaling Server)**

| **Spring 역할** | **설명** |
| --- | --- |
| 1) WebSocket 연결 생성 | 클라이언트들이 서버에 먼저 접속함 |
| 2) roomId 기반으로 클라이언트 매칭 | 같은 방에 있는 사람들끼리 연결 |
| 3) offer 전달 | A가 보낸 offer → B에게 전달 |
| 4) answer 전달 | B의 answer → A에게 전달 |
| 5) ICE 후보 전달 | 네트워크 후보 정보들을 양쪽에 중계 |

# **🔥 3. WebRTC가 하는 일**

Spring이 정보만 중계해주면,

웹 브라우저(WebRTC)는 아래와 같은 일을 **혼자서** 처리한다.

| **WebRTC 역할** | **설명** |
| --- | --- |
| 영상/음성 캡처 | getUserMedia() |
| 영상 인코딩/디코딩 | H.264 / VP8 등 코덱 |
| P2P 연결 생성 | RTCPeerConnection() |
| 지연 최소화 | 네트워크 최적화 |
| TURN/STUN 이용 | 방화벽/NAT 우회 |
| 실제 영상 전송 | 브라우저 ↔ 브라우저 직접 연결 |
